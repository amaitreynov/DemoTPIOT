<html>
<head>
  <title>Demo Admin IOT</title>
  <script src="http://code.jquery.com/jquery-1.5.min.js"></script>
  <script src="/socket.io/socket.io.js"></script>
  <script type="text/javascript">
    $(document).ready(function () {
      //j'initialise le socket
      var sock = io();
      //je re√ßois la data du socket
      sock.on('messageReceived', function (data) {
            var obj = JSON.parse(data);
            $('#dataReceived').text(obj.result);
      });
      sock.connect();
    });
  </script>
  <style>
  table {
      font-family: arial, sans-serif;
      border-collapse: collapse;
      width: 100%;
  }

  td, th {
      border: 1px solid #dddddd;
      text-align: left;
      padding: 8px;
  }

  tr:nth-child(even) {
      background-color: #dddddd;
  }
  </style>
</head>

<body>
    <h2>Monitor Devices</h2>
    <table>
      <tr>
        <th>DeviceId</th>
        <th>connectionState</th>
        <th>status</th>
        <th>lastActivityTime</th>
        <th>cloudToDeviceMessageCount</th>
        <th>Selected Device</th>
        <th>Command</th>
      </tr>
      {% for iotdevice in devices %}
      {% if loop.first %}<br>{% endif %}
      <tr>
        <td>{{iotdevice.deviceId}}</td>
        <td>{{iotdevice.connectionState}}</td>
        <td>{{iotdevice.status}}</td>
        <td>{{iotdevice.lastActivityTime}}</td>
        <td>{{iotdevice.cloudToDeviceMessageCount}}</td>
        {%if iotdevice.deviceId == deviceConnected %}
        <td>Selected</td>
        {% else %}
        <td><a href="/selectDevice/{{iotdevice.deviceId}}">Select</a></td>
        {% endif %}
        <td></td>
      </tr>
      {% endfor %}
    </table>
    <br>
    <br>
         <table>
      <tr>
        <th>Data received from device</th>
        <th>Command Send</th>
      </tr>
      <tr>
        <td><p id="dataReceived"></p></td>
        <td></td>
      </tr>
    </table>

</body>
</html>
